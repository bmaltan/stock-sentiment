<div class="route-header" gdColumns="auto 1fr auto" gdGap="0 1rem">
    <mat-icon class="button" svgIcon="arrow-left" (click)="goBack()"></mat-icon>
    <div class="route-title" gdColumns="auto 1fr auto">
        <span>{{ currentPlatformTitle }}</span>
        <span></span>
        <span class="date" style="font-size: 22px;">{{ selectedDate.value }}</span>
    </div>

    <div style="position: relative;" gdColumns="auto auto auto">
        <mat-icon class="button" svgIcon="date-clear" (click)="picker.open()">
        </mat-icon>
        <mat-form-field class="hide">
            <input matInput [formControl]="selectedDate" [matDatepicker]="picker" [matDatepickerFilter]="dateFilter">
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <div bsDisplayIfLoggedIn style="margin-left: 12px">
            <mat-icon style="margin-top: 2px" *ngIf="isFavorite" class="button" svgIcon="liked"
                (click)="toggleFavorite()"></mat-icon>
            <mat-icon style="margin-top: 2px" *ngIf="!isFavorite" class="button" svgIcon="like"
                (click)="toggleFavorite()"></mat-icon>
        </div>
    </div>
</div>

<div class="content-container">
    <table mat-table *ngIf="dataSource" [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="ticker">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Ticker </th>
            <td mat-cell *matCellDef="let element"> {{ element.ticker }} </td>
        </ng-container>

        <ng-container matColumnDef="openingPrice">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Opening Price </th>
            <td mat-cell *matCellDef="let element"> {{ element.openingPrice }} </td>
        </ng-container>

        <ng-container matColumnDef="closingPrice">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Closing Price </th>
            <td mat-cell *matCellDef="let element"> {{ element.closingPrice }} </td>
        </ng-container>

        <ng-container matColumnDef="dailyChange">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Change </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="element.openingPrice - element.closingPrice > 1 ?
                    'positive-change' : 'negative-change'">
                    {{ (element.openingPrice - element.closingPrice) /
                    element.openingPrice * 100 | number: '1.2-2' }}%
                </span>
            </td>
        </ng-container>

        <ng-container matColumnDef="numOfPosts">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="max-width: 40px;"> Posts </th>
            <td mat-cell *matCellDef="let element"> {{ element.numOfPosts }} </td>
        </ng-container>

        <ng-container matColumnDef="numOfMentions">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 70px;"> Mentions </th>
            <td mat-cell *matCellDef="let element"> {{ element.numOfMentions }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>